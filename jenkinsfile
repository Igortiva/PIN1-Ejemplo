pipeline {
    agent any

    // Define the Docker plugin variable
    docker = docker.withRegistry('https://index.docker.io/v1/')

    stages {
        stage('Build and tag Docker Image') {
            steps {
                // Build the Docker image
                docker.build('app1:latest', '.')

                // Tag the Docker image
                docker.image('app1:latest').tag('andreyrojasd/mundos-e:tagname')
            }
        }
        stage('Push Docker image to Docker Hub') {
            steps {
                // Push the Docker image to Docker Hub
                docker.image('andreyrojasd/mundos-e:tagname').push()
            }
        }
    }
}
